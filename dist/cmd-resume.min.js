/* v3.0.3 of CMD Resume by Brendon Body */(function($){"use strict";var defaultStyles={standard:{color:"white",bold:!1,italic:!1,backgroundColor:"#000"},title:{color:"red",bold:!0},command:{color:"white",bold:!1,italic:!0},pgp:{color:"white",bold:!1,italic:!0},name:{color:"green",bold:!0}},updateTitle=function(t){t?document.title=t+"'s Résumé":document.title="Command Line Résumé"},wrappedFormatting=function(t,a){return t||a?(t=t?t:"",a=a?a:"","[["+t+"]"+a+"]"):""};String.prototype.setFormat=function(t){var a=defaultStyles[t]?defaultStyles[t]:defaultStyles.standard,e=a.color?a.color:defaultStyles.standard.color,n=a.bold?a.bold:defaultStyles.standard.bold,r=a.italic?a.italic:defaultStyles.standard.italic,o=a.backgroundColor?a.backgroundColor:defaultStyles.standard.backgroundColor,i="";return n&&(i+="b"),r&&(i+="i"),e&&isValidColor(e)?(i+=";",i+=e):e=null,o&&isValidColor(o)?((n||r||e)&&(i+=";"),i+=o):(i+=n?"":";",i+=r?"":";",i+=e?"":";",i+=defaultStyles.standard.backgroundColor),wrappedFormatting(i,this)},String.prototype.setTitle=function(){return this.setFormat("title")},String.prototype.setCommand=function(){return this.setFormat("command")},String.prototype.setName=function(){return this.setFormat("name")},String.prototype.setPGP=function(){return this.setFormat("pgp")};var isValidColor=function(t){return!!t&&jQuery.terminal.valid_color(t)},getDate=function(t,a){return a?t+" - "+a:t?t+" - Present":""},getFullDegree=function(t,a){return a?t+" of "+a:t?t:""},buildUrl=function(t,a){return t=t.toLowerCase(),"twitter"===t?"https://www.twitter.com/"+a:"github"===t?"https://www.github.com/"+a:""},basicHandlerFunction=function(t){var a="\n";return a+=t&&t.data?t.data:""},systemHandlerFunction=function(t){return t?t.handler?t.handler(t.data):t.data?t.data:"":""},calculatedHandlerFunction=function(t){return"\n"+systemHandlerFunction(t)},arrayHandlerFunction=function(t,a){var e="";return t.handlers&&(t.handlers.title||t.handlers.organisation||t.handlers.date)?(jQuery.each(t.data,function(n,r){if(a||(e+="\n"),t.handlers.organisation&&(e+=t.handlers.title||t.handlers.date?t.handlers.organisation(r)+"\t":t.handlers.organisation(r)),t.handlers.title&&(e+=t.handlers.date?t.handlers.title(r)+"\t":t.handlers.title(r)),t.handlers.date&&(e+=t.handlers.date(r)),a&&0===n)return!1}),e):e},initStyles=function(t,a){var e=jQuery.extend(!0,{},t);return jQuery.map(a,function(a,n){t[n]&&(a.color&&(e[n].color=a.color),"undefined"!=typeof a.bold&&null!==a.bold&&(e[n].bold=a.bold),"undefined"!=typeof a.italic&&null!==a.italic&&(e[n].italic=a.italic),a.backgroundColor&&(e[n].backgroundColor=a.backgroundColor))}),e},getGithubUri=function(t){return t?"https://api.github.com/users/"+t+"/repos":""},getGithub=function(t,a,e,n){var r=a.toLowerCase()+".github.com";jQuery.getJSON(t+"?callback=?",function(t){n(filterGithubFork(t.data,r,e))})},filterGithubFork=function(t,a,e){var n=[];return jQuery.each(t,function(t,r){!r||r.name===a||e!==r.fork&&r.fork||n.push(r)}),n},formatGithub=function(t,a){var e="";return a||(e+="\n"),e+=t.name.setName(),t.description&&(e+=" - "+t.description),e};$.fn.CMDResume=function(t,a,e){var n=this;e=e||{},e||"string"!=typeof a&&(e=a),defaultStyles=initStyles(defaultStyles,e);var r={};r.commands={},r.commandProcessor={basic:basicHandlerFunction,array:arrayHandlerFunction,calculated:calculatedHandlerFunction,system:systemHandlerFunction},r.initTerminal=function(){r.term=n.terminal(function(t,a){a.echo(r.commandLineParse(t)+"\n")},r.settings)},r.initGithubForks=function(t){r.showForks=t.showForks===!0||"true"===t.showForks},r.init=function(t){r.initVariables(),r.initCommands(),r.initSettings(),r.initHTMLTitle(),r.initTerminal(),r.initGithubForks(t)},r.commandLineParse=function(t){var a=t.toLowerCase().split(" "),e=void 0!==a[0]&&a[0],n=void 0!==a[1]&&a[1].length>0&&a[1],o=r.commands[e];if("man"===e)return r.commands.man.handler(n);if(o){var i="-top"===n;return r.processCommand(o,i)}return e.length>0?e.setCommand()+" is an unknown command.":"No command entered."},r.processCommand=function(t,a){var e="";return a||t.type===r.commandProcessor.system||(e+=t.title.setTitle()),e+=t.type(t,a)},r.getCommandList=function(){var t=[];return $.map(r.commands,function(a,e){t.push(e)}),t},r.hasCommand=function(t){return r.commandList.indexOf(t)>=0},r.getCategory=function(t){return r.commands[t].type},r.initCommands=function(){r.commands.man={title:"man".setCommand(),description:"describes what each command does",type:r.commandProcessor.system,handler:function(t){return t?r.hasCommand(t)?t.setCommand()+" - "+r.commands[t].description:"man".setCommand()+": "+t.setCommand()+" is an unknown command.":"man:".setCommand()+" No command entered."}},r.commands.help={title:"Help",description:"lists help for all the commands",type:r.commandProcessor.system,handler:function(){var t="Available Commands:".setTitle();return $.map(r.commands,function(a,e){t+="\n",t+=e.setCommand(),t+=" - ",t+=a.description}),t}},r.commands.clear={description:"clear command history from screen"},r.data.basics.name&&(r.commands.name={title:"Name",description:"owner of the résumé",data:r.data.basics.name,type:r.commandProcessor.basic}),r.data.cmd_resume&&r.data.cmd_resume.pgpkey&&(r.commands.pgpkey={title:"PGP Key",description:"public PGP key",data:r.data.cmd_resume.pgpkey,type:r.commandProcessor.calculated,handler:function(t){return t.setPGP()}}),r.data.basics.summary&&(r.commands.about={title:"About",description:"about me",data:r.data.basics.summary,type:r.commandProcessor.basic}),r.data.basics.pdfLink&&(r.commands.pdf={title:"Resume PDF",description:"pdf version of the résumé",data:r.data.basics.pdfLink,type:r.commandProcessor.calculated,handler:function(t){return window.open(t),t+"\nHint: May need to allow pop-ups."}}),r.data.basics.location&&(r.commands.location={title:"Location",description:"current location",data:r.data.basics.location,type:r.commandProcessor.calculated,handler:function(t){return t.city+(t.region?", "+t.region:"")+", "+t.countryCode}}),r.data.basics.label&&(r.commands.lookingfor={title:"Looking For",description:"looking for what kind of position",data:r.data.basics.label,type:r.commandProcessor.calculated,handler:function(t){return t+" positions"}}),r.data.basics.profiles&&(r.commands.socialmedia={title:"Social Media",description:"social media profiles",data:r.data.basics.profiles,type:r.commandProcessor.calculated,handler:function(t){var a="";return $.each(t,function(t,e){if(e.network)if(0!==t&&(a+="\n"),"email"===e.network.toLowerCase())a+=e.network+" - "+e.url.split(":").charAt(1);else if(e.url)a+=e.network+" - "+e.url;else if(e.username){var n="";n=buildUrl(e.network,e.username),n&&(a+=e.network+" - "+n)}}),a}}),r.data.skills&&(r.commands.skills={title:"Skills",description:"skills obtained",type:r.commandProcessor.calculated,data:r.data.skills,handler:function(t){var a="";return $.each(t,function(e,n){a+=n.level,a+=" in ",a+=n.name,e!==t.length-1&&(a+="\n")}),a}}),r.commands.splash={title:"Splash Screen",description:"print the welcome screen",type:r.commandProcessor.system,handler:function(){var t="";return r.data.cmd_resume.splash&&r.data.cmd_resume.splash&&(t+=r.data.cmd_resume.splash,t+="\n"),t+=r.data.basics.name?"Welcome to "+r.data.basics.name.setName()+"'s résumé.\n":"Welcome to my résumé.\n",t+="\nType ",t+="help".setCommand(),t+=" for commands"}},r.data.education&&(r.commands.education={title:"Education",description:"education history",data:r.data.education,type:r.commandProcessor.array,handlers:{organisation:function(t){return t.institution},title:function(t){return getFullDegree(t.studyType,t.area)},date:function(t){return getDate(t.startDate,t.endDate)}}}),r.data.work&&(r.commands.employment={title:"Employment",description:"employment history",data:r.data.work,type:r.commandProcessor.array,handlers:{organisation:function(t){return t.company},title:function(t){return t.position},date:function(t){return getDate(t.startDate,t.endDate)}}}),r.data.volunteer&&(r.commands.volunteering={title:"Volunteering",description:"volunteering history",type:r.commandProcessor.array,data:r.data.volunteer,handlers:{organisation:function(t){return t.organization},title:function(t){return t.position},date:function(t){return getDate(t.startDate,t.endDate)}}}),r.data.awards&&(r.commands.awards={title:"Awards",description:"awards obtained",type:r.commandProcessor.array,data:r.data.awards,handlers:{organisation:function(t){return t.awarder},title:function(t){return t.title},date:function(t){return t.date}}}),r.data.publications&&(r.commands.publications={title:"Publications",description:"publications produced",type:r.commandProcessor.array,data:r.data.publications,handlers:{organisation:function(t){return t.publisher},title:function(t){return t.name},date:function(t){return t.releaseDate}}}),r.data.languages&&(r.commands.languages={title:"Languages",description:"languages",type:r.commandProcessor.array,data:r.data.languages,handlers:{organisation:function(t){return t.language},title:function(t){return t.fluency}}}),r.data.interests&&(r.commands.interests={title:"Interests",description:"interests",type:r.commandProcessor.array,data:r.data.interests,handlers:{organisation:function(t){return t.name+":"},title:function(t){return t.keywords.join(", ")}}}),r.data.references&&(r.commands.references={title:"References",description:"references",type:r.commandProcessor.array,data:r.data.references,handlers:{organisation:function(t){return t.name.setName()+":"},title:function(t){return"\n"+t.reference}}})},r.initVariables=function(){r.data.cmd_resume||(r.data.cmd_resume={}),$(r.data.basics.profiles).each(function(){r.data.basics.githubUsername||"github"!==this.network.toLowerCase()?"resume"===this.network.toLowerCase()&&(r.data.basics.pdfLink=this.url):(r.data.githubCache="",this.username?r.data.basics.githubUsername=this.username:this.url&&(r.data.basics.githubUsername=this.url))}),r.data.basics.githubUsername&&getGithub(getGithubUri(r.data.basics.githubUsername),r.data.basics.githubUsername,r.showForks,function(t){var a="";$.each(t,function(t,e){a+=formatGithub(e,0===t)}),r.commands.github={title:"Github Repositories",description:"list Github repositories",type:r.commandProcessor.basic,data:a},r.commandList.push("github")})},r.initSettings=function(){r.commandList=r.getCommandList(),r.settings={greetings:r.commands.splash.handler(),onBlur:function(){return!1},completion:r.commandList}},r.initHTMLTitle=function(){updateTitle(r.data.basics.name)},$.getJSON(t,function(t){r.data=t,a||r.init(e),$.getJSON(a,function(t){r.data.pgpkey=t.pgpkey,r.data.pgpkey&&(r.commands.pgpkey={title:"PGP Key",description:"print PGP key",type:r.commandProcessor.calculated,handler:function(){for(var t="",a=0;a<r.data.pgpkey.length;a++)t+=r.data.pgpkey[a],a!==r.data.pgpkey.length-1&&(t+="\n");return t.setPGP()}}),t.github&&(r.data.basics.githubUsername=t.github,r.data.githubCache=""),t.splash&&(r.data.splash=t.splash),r.init(e)})})};}(jQuery));